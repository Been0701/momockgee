<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>

    <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&display=swap" rel="stylesheet">

    <title>ë­ ë“œì…¨ì–´ìš”?</title>
    <style>
        @font-face {
            font-family: 'IM_Hyemin-Bold';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2106@1.1/IM_Hyemin-Bold.woff2') format('woff');
            font-weight: bold;
            font-style: normal;
        }

        body {
            font-family: 'IM_Hyemin-Bold', sans-serif
        }
    </style>
    <style>

        .title {
            width: 100%;
            height: 400px;

            background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.5)), url('https://images.unsplash.com/photo-1541574823565-f1d660886187?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2072&q=80');
            background-position: bottom;
            background-size: cover;

            margin-bottom: 15px;

            color: white;

            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }


        .wrap {
            width: 800px;
            margin: auto;
            padding-top: 50px;
        }

        #textbox {
            width: 500px;
        }

        /*í…ìŠ¤íŠ¸ ì…ë ¥ê°’ ë†’ì´ì— ë”°ë¼ ê³µê°„ì´ ëŠ˜ì–´ë‚˜ê²Œ ì ìš©*/
        textarea {
            width: 600px;
            min-height: 5rem;
            overflow-y: hidden;
            resize: none;
        }

        /*í…Œì´ë¸”ì˜ ê° tdë“¤ ê°„ê²©ì„ ì¼ì •í•˜ê²Œ ì£¼ë„ë¡ ì¡°ì •*/
        table {
            width: 700px;
            table-layout: fixed;
            word-break: break-all;
            height: auto;
        }

    </style>
</head>
<script>
    function post() {
        let post_product = $('#post_product').val()
        let post_store = new Array();
        //checkboxì˜ nameê°’ì´ sendCheckì´ë©´ì„œ ì²´í¬ë˜ì–´ ìˆëŠ” í•¨ìˆ˜ë¥¼ eachí•¨ìˆ˜ë¡œ í˜¸ì¶œí•œë‹¤.
        $("input[name=post_store]:checked").each(function () {
            post_store.push($(this).val()); //ë°°ì—´ì— ê°’ë„£ê¸°
        });
        console.log(post_store)

        let post_star = $('#star').val()
        let post_content = $('#content').val()
        let file = $('#file')[0].files[0]
        let form_data = new FormData()

        form_data.append("file_give", file)
        form_data.append("post_product_give", post_product)
        form_data.append("post_store_give", post_store)
        form_data.append("post_star_give", post_star)
        form_data.append("post_content_give", post_content)

        $.ajax({
            type: 'POST',
            url: '/posts',
            data: form_data,
            contentType: false,
            cache: false,
            processData: false,
            success: function (response) {
                alert(response['msg'])
                window.location.reload()
            }
        })
    }

    function resize(obj) {
        obj.style.height = '1px';
        obj.style.height = (10 + obj.scrollHeight) + 'px';
    }

    function to_main() {
        window.location.href = "/"
    }

</script>

<body>

<div class="post_box">
    <div class="title">
        <h1>ë­ ë“œì…¨ì–´ìš”?</h1>
    </div>
    <div class="wrap">
        <table class="table table-sm">

            <tr>
                <td>ìƒí’ˆëª…</td>
                <td colspan="5"><input type="text" style="float:left" id="post_product" placeholder="ìƒí’ˆëª… ì…ë ¥"
                                       name="post_product"></td>
            </tr>
            <tr>
                <td>ì‚¬ì§„ ì²¨ë¶€</td>
                <td colspan="5">
                    <div class="custom-file">
                        <input type="file" class="custom-file-input" id="file">
                    </div>
                </td>
            </tr>
            <div class="wrap_store">
                <tr class="store_row">
                    <td class="store_item">êµ¬ì…ì²˜</td>
                    <td class="store_item"><input type="checkbox" id="cu" name="post_store" value="CU">ì”¨ìœ </td>
                    <td class="store_item"><input type="checkbox" id="gs" name="post_store" value="GS">ì§€ì—ìŠ¤</td>
                    <td class="store_item"><input type="checkbox" id="seven" name="post_store" value="ì„¸ë¸ì¼ë ˆë¸">ì„¸ë¸ì¼ë ˆë¸</td>
                    <td class="store_item"><input type="checkbox" id="stop" name="post_store" value="ë¯¸ë‹ˆìŠ¤í†±">ë¯¸ë‹ˆìŠ¤í†±</td>
                    <td class="store_item"><input type="checkbox" id="emart" name="post_store" value="ì´ë§ˆíŠ¸24">ì´ë§ˆíŠ¸24</td>
                </tr>
            </div>
            <tr>
                <td>ë³„ì </td>
                <td colspan="5">
                    <select style="float:left" size="1" name="post_star" id="star">
                        <option value="5" selected>â­â­â­â­â­</option>
                        <option value="4">â­â­â­â­</option>
                        <option value="3">â­â­â­</option>
                        <option value="2">â­â­</option>
                        <option value="1">â­</option>
                    </select>
                </td>
            </tr>

            <tr>
                <td>ì½”ë©˜íŠ¸ (ë¦¬ë·°)</td>
                <td id="textbox" colspan="5"><textarea id="content" type="text"
                                                       placeholder="ìƒí’ˆì— ëŒ€í•œ ë¦¬ë·°ë¥¼ ììœ ë¡­ê²Œ ì…ë ¥í•´ ì£¼ì„¸ìš”ğŸ˜Š"
                                                       onkeydown="resize(this)" onkeyup="resize(this)"
                                                       name="post_content"></textarea></td>
            </tr>
            <tr>
                <td colspan="3">
                    <button class="btn btn-light" style="float:right" onclick="to_main()">í™ˆìœ¼ë¡œ</button>
                </td>
                <td colspan="3">
                    <button class="btn btn-primary" onclick="post()">ê¸€ì“°ê¸°</button>
                </td>
            </tr>



        </table>
    </div>
</div>

</body>

</html>